{{define "widget-list"}}
    {{template "base" .}}
{{end}}

{{define "title"}}Widgets{{end}}

{{define "content"}}

<div class="bg-gray-100 min-h-screen">
  <div class="flex justify-center min-h-screen">
      <div class="w-full max-w-4xl bg-white rounded-2xl shadow-2xl p-6 my-8">
          <div class="flex justify-between">
              <h1 class="text-4xl font-semibold text-gray-800 mb-8 tracking-tight text-center">
                  Widgets
              </h1>

              <div x-data="{ showModal: false }" @keydown.escape.window="showModal = false" class="relative z-0">
                <!-- Create Button -->
                <button
                  type="button"
                  class="flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold h-10 py-2 px-4 rounded shadow transition duration-150 cursor-pointer"
                  @click="showModal = true"
                >
                  <span class="material-symbols-outlined text-lg">add</span>
                  Create
                </button>
              
                <!-- Modal Overlay -->
                <div
                  x-show="showModal"
                  x-transition:enter="transition ease-out duration-200"
                  x-transition:enter-start="opacity-0"
                  x-transition:enter-end="opacity-100"
                  x-transition:leave="transition ease-in duration-150"
                  x-transition:leave-start="opacity-100"
                  x-transition:leave-end="opacity-0"
                  class="fixed inset-0 flex items-center justify-center bg-black/50 z-40"
                  style="display: none;"
                >
                  <!-- Modal Dialog -->
                  <div
                    @click.away="showModal = false"
                    x-show="showModal"
                    x-transition:enter="transition ease-out duration-200"
                    x-transition:enter-start="opacity-0 scale-95"
                    x-transition:enter-end="opacity-100 scale-100"
                    x-transition:leave="transition ease-in duration-150"
                    x-transition:leave-start="opacity-100 scale-100"
                    x-transition:leave-end="opacity-0 scale-95"
                    class="bg-white rounded-lg shadow-lg max-w-md w-full p-6"
                    style="display: none;"
                  >
                    <div class="flex items-center justify-between mb-4">
                      <h2 class="text-xl font-semibold text-gray-800">Create Widget</h2>
                    </div>
                    <form method="POST" action="/widgets">
                      <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
                      <div class="mb-4">
                        <label class="block text-gray-700 font-medium mb-1" for="name">Name</label>
                        <input
                          id="name"
                          name="name"
                          type="text"
                          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                          placeholder="Enter name"
                          required
                        />
                      </div>
                      <div class="mb-6">
                        <label class="block text-gray-700 font-medium mb-1" for="description">Description</label>
                        <textarea
                          id="description"
                          name="description"
                          class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                          rows="3"
                          placeholder="Enter description"
                          required
                        ></textarea>
                      </div>
                      <div class="flex justify-end space-x-2">
                        <button 
                          class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded cursor-pointer"
                          @click="showModal = false"
                          type="button"
                        >
                        Cancel
                        </button>
                        <button
                          type="submit"
                          class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded cursor-pointer"
                        >
                          Save
                        </button>
                      </div>
                    </form>                   
                  </div>
                </div>
              </div>

          </div>
          <div class="overflow-x-auto rounded-lg">
              <table class="min-w-full bg-white rounded-lg shadow-md">
                  <thead>
                      <tr>
                          <th class="px-6 py-4 text-left font-medium text-gray-600 tracking-wider bg-blue-50">
                              ID  
                          </th>
                          <th class="px-6 py-4 text-left font-medium text-gray-600 tracking-wider w-52 bg-blue-50">
                              Name
                          </th>
                          <th class="px-6 py-4 text-left font-medium text-gray-600 tracking-wider bg-blue-50">
                              Description
                          </th>
                          <th class="px-6 py-4 text-left font-medium text-gray-600 tracking-wider bg-blue-50">
                              Created At
                          </th>
                          <th class="px-6 py-4 text-left font-medium text-gray-600 tracking-wider bg-blue-50">
                              Updated At
                          </th>
                      </tr>
                  </thead>
                  <tbody class="divide-y divide-gray-200">
                      {{range .Widgets}}
                      <tr class="hover:bg-blue-50 transition-colors duration-150">
                          <td class="px-6 py-4 text-blue-700">
                            <a 
                              href="/widgets/{{.ID}}" 
                              class="hover:text-pink-500 hover:bg-blue-50 transition-colors duration-300 px-2 py-1 rounded"
                            >
                              {{.ID}}
                            </a>
                          </td>
                          <td class="px-6 py-4 text-gray-700 font-semibold">{{.Name}}</td>
                          <td class="px-6 py-4 text-gray-700">{{.Description}}</td>
                          <td class="px-6 py-4 text-gray-500">{{.CreatedAt.Format "2006-01-02 15:04:05"}}</td>
                          <td class="px-6 py-4 text-gray-500">{{.UpdatedAt.Format "2006-01-02 15:04:05"}}</td>
                      </tr>
                      {{else}}
                      <tr>
                          <td colspan="5" class="px-6 py-8 text-center text-gray-400">
                              No widgets found.
                          </td>
                      </tr>
                      {{end}}
                  </tbody>
              </table>
          </div>
      </div>
  </div>
</div>


{{end}}